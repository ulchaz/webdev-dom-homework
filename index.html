<!DOCTYPE html>
<html>
  <head>
    <title>Проект "Комменты"</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="container">
      <ul class="comments" id="list">
      
      </ul>
      <div id="reply-form" class="add-form">
        <input
          type="text"
          class="add-form-name"
          placeholder="Введите ваше имя"
          id="inputName"
        />
        <textarea
          type="textarea"
          class="add-form-text"
          placeholder="Введите ваш комментарий"
          rows="4"
          id="inputComment"
        ></textarea>
        <div class="add-form-row">
          <button id="button" class="add-form-button">Написать</button>
        </div>
      </div>
      
        </div>
      </div>
    </div>
  </body>

  <script>

"use strict";
const comments = [
  {
    name: 'Глеб Фокин',
    text: 'Это будет первый комментарий на этой странице',
    date: '12.02.22 12:18',
    likes: 3,
    liked: false
  },
  {
    name: 'Варвара Н.',
    text: 'Мне нравится как оформлена эта страница! ❤',
    date: '13.02.22 19:22',
    likes: 75,
    liked: true
  }
];



function renderComments() {
  const listElement = document.getElementById('list');
  listElement.innerHTML = '';

  comments.forEach((comment, index) => {
    const commentElement = document.createElement('li');
    commentElement.classList.add('comment');
    commentElement.innerHTML = 
      `<div class="comment-header">
        <div>${comment.name}</div>
        <div>${comment.date}</div>
      </div>
      <div class="comment-body">
        <div class="comment-text" style="white-space: pre-line;">${comment.text}</div>
      </div>
      <div class="comment-footer">
        <div class="comment-actions">
        <button class="like-button ${comment.liked ? '-active-like' : ''}" data-id="${index}"></button>
        <span class="likes-counter">${comment.likes}</span>
      </div>
      </div>`
    ;
    commentElement.addEventListener('click', function(event) {
      if (event.target.matches('.like-button')) {
        event.stopPropagation();
        return;
      }
  const replyForm = document.getElementById('reply-form');
  const replyText = replyForm.querySelector('.add-form-text');
  replyText.value = `> ${comment.text}
  ${comment.name}, ` ;
});

commentElement.addEventListener('click', function(event) {
  if (event.target.closest('.like-button')) {
    return;
  }

 
});

    listElement.appendChild(commentElement);
  });

  
  const likeButtons = document.querySelectorAll('.like-button');
  const likesCounters = document.querySelectorAll('.likes-counter');
  let likedStates = [false, false];

  for (let i = 0; i < likeButtons.length; i++) {
    const button = likeButtons[i]
    button.addEventListener('click', function() {
      const index = button.dataset.id
      const comment = comments[index]
      comment.liked = !comment.liked
      if (comment.liked) {
        comment.likes++
      } else {
        comment.likes--
      }
      renderComments();
    });
  }
};


document.addEventListener('DOMContentLoaded', function() {
  const inputNameElement = document.getElementById('inputName');
  const inputCommentElement = document.getElementById('inputComment');
  const buttonElement = document.getElementById('button');

  buttonElement.addEventListener('click', () => {
    inputNameElement.style.backgroundColor = '';
    inputCommentElement.style.backgroundColor = '';

    if (inputNameElement.value === '' && inputCommentElement.value === '') {
      inputNameElement.style.backgroundColor = '#FFA07A';
      inputCommentElement.style.backgroundColor = '#FFA07A';
      return;
    }

    if (inputNameElement.value === '') {
      inputNameElement.style.backgroundColor = '#FFA07A';
      return;
    }

    if (inputCommentElement.value === '') {
      inputCommentElement.style.backgroundColor = '#FFA07A';
      return;
    }

    const currentDate = new Date();
  let day, month, year, hours, minutes;
    day = String(currentDate.getDate()).padStart(2, '0'); 
    month = String(currentDate.getMonth() + 1).padStart(2, '0'); 
    year = String(currentDate.getFullYear()).slice(-2); 
    hours = String(currentDate.getHours()).padStart(2, '0'); 
    minutes = String(currentDate.getMinutes()).padStart(2, '0'); 

    const formattedDate =` ${day}.${month}.${year} ${hours}:${minutes}`;

    const newComment = {
      name: inputNameElement.value.replaceAll("<", "&lt;").replaceAll(">", "&gt;"),
      text: inputCommentElement.value.replaceAll("<", "&lt;").replaceAll(">", "&gt;"),
      date: formattedDate,
      likes: 0,
      liked: false
    };

    comments.push(newComment);
    renderComments();

    inputNameElement.value = '';
    inputCommentElement.value = '';
  });
});

renderComments();
  
  </script>
</html>